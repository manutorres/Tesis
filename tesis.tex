\documentclass[oneside]{book}

\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}

\title{Argumentación en sistemas multi-agente} % do change
\author{Leonardo Molas \and Manuel Torres}

\begin{document}

\maketitle

\chapter*{Introducción}

---

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Preliminares (Estado del arte)} % me pareció que iba primero esto y después el juego, pero no sé :P

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Preliminares (Del juego)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Arquitectura}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Toma de decisiones}

En esta sección se expandirá lo explicado en el capítulo anterior, relacionado a 
la toma de decisiones. Esto es, generación de los deseos, su estructura, la selección de la
intención, en particular su proceso de argumentación (derrotas, tanto por peso como 
propias), todo con ejemplos concretos del programa realizado. Luego, se expondrán los 
diferentes deseos utilizados.

\section{Interfaz con Prolog}
% no estoy tan seguro si esto debería ir acá o en el cap anterior

\section{Idea general}

\label{sec:IdeaGeneral}

Sin inmiscuirse en los detalles de la implementación, la idea que llevamos a cabo en el 
desarrollo del programa fue un sistema en el que existen un tipo especial de argumentos,
que representan los esquemas de deseos, en cuya signatura contienen un valor numérico.
Este valor es el \textbf{peso} %negrita
del argumento. Cada deseo, al ser un argumento, se calcula examinando la veracidad de sus
precondicones, las cuales pueden ser razones para descartar o garantizar la posibliidad de
su aplicación, y/o hechos que enuncian cuantificaciones acerca del mundo actual (por 
ejemplo, el valor de un nodo o el costo de un arco). Estos valores son utilizados en el
determinación del peso del deseo aplicando un cálculo \textit{ad hoc}, %cursiva
que será explicada luego.

Cada esquema de argumento puede tener otros parámetros en la signatura aparte de su peso,
como por ejemplo el destino en el cual se aplicará la acción deseada. Estos argumentos
pueden instanciarse varias veces con distintos argumentos, dando la posibliidad a que 
entren en conflicto deseos del mismo tipo, pero con diferentes parámetros, y posiblemente
diferentes pesos.

Dados todos los deseos que en efecto serán contrapuestos, con sus respectivos pesos, el 
proceso de selección se realiza enfrentando a todos sus argumentos entre si. Estos 
ataques, en DeLP, pueden ser programados de la siguiente manera:

$$ ~ X \leftarrow Y$$ 

Siendo $X$ e $Y$ cualquier argumento de deseo. Este tipo de reglas estrictas, a las que
denominaremos \textit{reglas de cancelación mutua}, se repite 
para todos los deseos existentes, de manera tal de, siendo $\Omega$ el conjunto de las 
metas, haya una regla de cancelación mutua para cada elemento del conjunto
$\Omega \times \Omega$.

Al consultar por la veracidad de cualquiera de los argumentos de los deseos, se realizarán
una serie de ataques entre ellos. En DeLP, la mayoría de ellos generarán bloqueos, si se 
utilizan los criterios de comparación comunes (estos son \textit{Especificidad} y 
\textit{Derrotadores a asumciones}), ya que los argumentos no tienen necesariamente 
precondicones en común. Por esta razón, se utiliza un nuevo criterio, el cual 
denominaremos \textit{Mayor Peso}. Como su nombre lo indica, compara los pesos de los 
argumentos, si estos existen (y estos sólo existen en los argumentos de deseos). Los 
argumentos con mayor peso derrotan a los de menor.

En el caso de que el peso de dos argumentos sea el mismo, todavía existiría el problema 
de los bloqueos. Esto generaría un problema si justo se tratará de los más pesados, ya 
que ninguno de los dos (o más) deseos estarían garantizados o derrotados, y la consulta
por deseo no devolvería ningún resultado. Por esta razón, se extiende el criterio 
\textit{Mayor Peso}\ para que contemple como caso especial las igualdades de peso. En 
estos casos, se hará una comparación por orden lexicográfico de los argumentos, ya que
no interesa cuál de los dos gane. 

En la figura %mamarracho
se muestra este concepto de derrotas. % explicar

%figura mamarracho

\section{Esquemas de argumento}

% En el subprograma de toma de decisiones (a partir de ahora subprograma DeLP, o simplemente
% DeLP), se utilizaron dos tipos de argumentos. En esta sección, se explicará su uso.

El esquema anterior fue el propuesto, pero no exactamente el implementado, ya que
realizamos modificaciones para optimizar los tiempos de ejecución del programa. Sin 
embargo, el concepto de tener varios tipos de argumentos, incluyendo el de deseos, con sus
pesos, se mantuvo. En esta sección se explicarán más en detalle.

\subsection{Argumentos de deseos}

Como fue explicado en la sección \ref{sec:IdeaGeneral}, el tipo más importante de 
reglas en el subprograma DeLP son los de deseos. Su esquema es el siguiente:

\begin{verbatim}
[Nombre]\(Peso {, [Arg]}*\) (<- | -<) [Precon] {, [Preconds]}*.
\end{verbatim}

Donde:

\begin{itemize}
    \item [Nombre] El nombre del deseo.
    \item [Arg] Los argumentos (en el sentido de signatura de la regla).
    \item [Precon] La primer precondición de la regla. Puede ser \textit{true}, en cuyo
    caso, la regla es un hecho (si es una regla estricta) o asumción (si es una regla 
    rebatible).
    \item [Precons] El resto de las precondiciones.

\end{itemize}

El argumento \texttt{Peso} siempre estará en las reglas de deseos en la primera posición.

Al ser consultado por uno de ellos, se generan todas las instancias posibles de estas
reglas, con sus respectivos argumentos. Si por alguna razón, una de las precondiciones no
se puede satisfacer, entonces el argumento queda como \textit{indefinido} %undecided?
y en términos del programa final, es lo mismo a que no sea verdad, o sea, que esté 
derrotado. 

Este caso puede suceder cuando, por ejemplo, se calcula una meta de 
exploración a un nodo X, y se calculan las diferentes creencias necesarias. Si por 
alguna razón, no se puede encontrar un camino a ese nodo, nunca se asertará la creencia
que existe un camino, y cuando llegue el momento de chequear la veracidad del argumento,
el hecho no se encontrará, por lo que el argumento quedará \textit{indefinido}. 

\subsection{Otros argumentos}

El resto de las reglas del programa serán los soportes para las anteriores. No 
contendrán peso, aunque serán los medios por los cuales se calcularán éstos, entre
otros usos.

\subsubsection{Beliefs}

Como fue explicado antes, % link?
un subconjunto de las beliefs será utilizado por el subprograma DeLP, directamente por 
las reglas de deseos, o indirectamente a través de otras reglas. Estas serán reglas de 
la forma:

\begin{verbatim}
b\([Signatura]\) <- true.
\end{verbatim}

Donde Signatura será un hecho Prolog que contenga la información relevante de la 
creencia. Un ejemplo de esto sería la siguiente regla:

\begin{verbatim}
b(~esSeguro(vertex34))<-true.
\end{verbatim}

Este hecho determina que en el turno actual, la posición \texttt{vertex34} es peligrosa,
ya que se encuentra un saboteador enemigo parado en él. Varios deseos tienen en cuenta
que la posición a la que irán sea segura, ya que sino entrarían en un posible combate.
Luego, un deseo que necesite tener como parámetro un vértice seguro, lo descartaría.

La existencia o no de estos hechos corresponde con una semántica binaria. Otros tipos de
creencias en el subprograma DeLP no se corresponden con ella, a pesar de corresponderse
con el esquema anterior. Se trata de creencias que exponen cuantificaciones a ser 
tenidas en cuenta para el cálculo de los pesos. Un ejemplo de estas creecias es el 
siguiente:

\begin{verbatim}
b(difPuntosSinMi(0))<-true.
\end{verbatim}

En este caso, el hecho expone la cantidad de puntos que se podrían llegar a perder si el
agente se va de su vértice (ya sea porque se mueve o porque deja de estar activado). Esa
cantidad se tiene en cuenta por los argumentos de deseos, para descartar los que generen
mucha pérdida de puntos. ``Mucha pérdida'' se corresponde con un concepto difuso, a
diferencia de los hechos explicados antes. Este valor será el parámetro de una función
de varias variables, que será explicado luego, el cual genera el valor que se usa como
peso del argumento de deseo. Perder cero puntos, como expone el hecho de más arriba, es el
caso ideal de un deseo, por lo que las metas que lo consideren tendrán un puntaje
relativamente alto.

Existen otras creencias de este tipo, que pueden tener otros parámetros además del valor
numerico, como por ejemplo un vértice. El hecho \texttt{difPuntos} es un ejemplo de esto.
Es parecido al anterior, con la diferencia que se instancia con un vértice al cual es
posible llegar en una cantidad pequeña de turnos, y su otro parámetro representa la
cantidad de puntos que ganaría (o perdería, si el valor es negativo) el agente al moverse
a dicho vértice. Por esta razón, puede haber varias de estos hechos instanciados con
distintos vértices la vez.

\subsubsection{Creencias indirectas}

Hay algunas creencias que no se generan en tiempo de ejecución del programa Prolog, sino
que se calculan cuando se ejecuta el subprograma DeLP. Se trata de típicos argumentos
DeLP, que pertenecen a los argumentos de deseos. Se calculan en base a las creencias
expuestas en la sección anterior. Un ejemplo de estas es el siguiente:

\begin{verbatim}
puedoHacerParry -<
    myRole(repairer).

puedoHacerParry -<
    myRole(saboteur).

puedoHacerParry -<
    myRole(sentinel).

~puedoHacerParry <-
    myEnergy(Energy),
    less(Energy,2).
\end{verbatim}

En este caso, la creencia \texttt{puedoHacerParry} se calcula en base al rol del agente,
así como también de la energía del agente. Esto es porque no todos los roles tienen la
acción asociada, por lo que se listan las que si lo pueden. Por otro lado, el agente
no puede hacer \textit{parry}\ si no tiene por lo menos dos puntos de energía.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Consideraciones generales}
% qué iba aca?


\end{document}
